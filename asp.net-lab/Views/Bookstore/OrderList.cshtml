@model asp.net_lab.Models.Services.PagedListAsync<asp.net_lab.Models.Bookstore.OrderModel>
@{
ViewBag.Title = "Zamówienia";
Layout = "_Layout";
}
@if (Model.TotalItems == 0)
{
<h2>Brak zamówień</h2>
}
else
{
<h2>Zamówienia klienta o id @Model.Data[0].CustomerId</h2>
<table class="table">
   <thead>
      <tr>
         <th>
            @Html.DisplayNameFor(m => m.Data[0].OrderDate)
         </th>
         <th>
            @Html.DisplayNameFor(m => m.Data[0].OrderId)
         </th>
         <th>
            Operacje
         </th>
      </tr>
   </thead>
   <tbody>
      @foreach (var entry in @Model.Data)
      {
      <tr>
         <td>
            @entry.OrderDate
         </td>
         <td>
            @entry.OrderId
         </td>
         <td>
            <a class="btn btn-primary" asp-controller="Bookstore"  asp-action="EditOrder" asp-route-orderId=@entry.OrderId>Szczegóły</a>
         </td>
      </tr>
      }
   </tbody>
</table>
@if (Model.TotalItems > 20)
{
<nav>
   <ul class="pagination">
      @if (Model.IsPrevious)
      { 
      <li class="page-item">
         <a class="page-link" 
            asp-controller="Bookstore" 
            asp-action="OrderList"
            asp-route-customerId="@Model.Data[0].CustomerId"
            asp-route-page="@(Model.Page - 1)"
            asp-route-size="@Model.Size">
         Poprzednia
         </a>
      </li>
      }
      else
      { 
      <li class="page-item disabled">
         <a class="page-link">Poprzednia</a>
      </li>
      } 
      @foreach (var i in Model.Pages)
      {
      if (i < 0)
      {
      <li class="page-item">
         <a class="page-link" 
            asp-controller="Bookstore" 
            asp-action="OrderList"
            asp-route-customerId="@Model.Data[0].CustomerId"
            asp-route-page="@(-i)" 
            asp-route-size="@Model.Size">
         ...
         </a>
      </li>
      continue;
      }
      @if (i == Model.Page)
      {
      <li class="page-item active">
         <a class="page-link" >@Model.Page</a>
      </li>
      continue;
      }
      <li class="page-item">
         <a class="page-link" 
            asp-controller="Bookstore" 
            asp-action="OrderList" 
            asp-route-customerId="@Model.Data[0].CustomerId"
            asp-route-page="@i" 
            asp-route-size="@Model.Size">
         @i
         </a>
      </li>
      }
      @if (Model.IsNext)
      { 
      <li class="page-item">
         <a class="page-link" 
            asp-controller="Bookstore" 
            asp-action="OrderList" 
            asp-route-customerId="@Model.Data[0].CustomerId"
            asp-route-page="@(Model.Page + 1)" 
            asp-route-size="@Model.Size">
         Następna
         </a>
      </li>
      }
      else
      { 
      <li class="page-item disabled">
         <a class="page-link">Następna</a>
      </li>
      }
   </ul>
</nav>
}
}