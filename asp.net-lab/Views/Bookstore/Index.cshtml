@model asp.net_lab.Models.Services.PagedListAsync<asp.net_lab.Models.Bookstore.CustomerModel>
@{
	ViewBag.Title = "Klienty";
	Layout = "_Layout";
}
<h2>Klienty</h2>
<a class="btn btn-primary" asp-action="AddCustomer" asp-controller="Bookstore">Dodaj klienta</a>

<table class="table">
   <thead>
	  <tr>
		 <th>
					@Html.DisplayNameFor(m => m.Data[0].FirstName)
		 </th>
		 <th>
					@Html.DisplayNameFor(m => m.Data[0].LastName)
		 </th>
		 <th>
					@Html.DisplayNameFor(m => m.Data[0].Email)
		 </th>
		 <th>
					@Html.DisplayNameFor(m => m.Data[0].OrderCount)
		 </th>
		 <th>
					@Html.DisplayNameFor(m => m.Data[0].Country)
		 </th>
	  </tr>
   </thead>
   <tbody>
			@foreach (var entry in @Model.Data)
			{
			  <tr>
				 <td>
						@entry.FirstName
				 </td>
				 <td>
						@entry.LastName
				 </td>
				 <td>
					@entry.Email
				 </td>
				 <td>
							<a class="btn btn-secondary"
							asp-controller="Bookstore" 
							asp-action="OrderList"
							asp-route-customerId="@entry.CustomerId"
							>@entry.OrderCount</a>
				 </td>
				 <td>
						@entry.Country
				 </td>
			  </tr>
			}
   </tbody>
</table>
@if (Model.TotalItems > 20)
{
	<nav>
		<ul class="pagination">
			@if (Model.IsPrevious)
			{
				<li class="page-item">
					<a class="page-link" 
					asp-controller="Bookstore" 
					asp-action="Index" 
					asp-route-page="@(Model.Page - 1)" 
					asp-route-size="@Model.Size">
						Poprzednia
					</a>
				</li>
			}
			else
			{
				<li class="page-item disabled">
					<a class="page-link">Poprzednia</a>
				</li>
			} 
			@foreach (var i in Model.Pages)
			{
				if (i < 0)
				{
					<li class="page-item">
						<a class="page-link" 
						asp-controller="Bookstore" 
						asp-action="Index" 
						asp-route-page="@(-i)" 
						asp-route-size="@Model.Size">
							...
						</a>
					</li>
					continue;
				}
				@if (i == Model.Page)
				{
					<li class="page-item active">
						<a class="page-link" >@Model.Page</a>
					</li>
					continue;
				}
				<li class="page-item">
					<a class="page-link" 
					asp-controller="Bookstore" 
					asp-action="Index" 
					asp-route-page="@i" 
					asp-route-size="@Model.Size">
						@i
					</a>
				</li>
			}
			@if (Model.IsNext)
			{
				<li class="page-item">
					<a class="page-link" 
					asp-controller="Bookstore" 
					asp-action="Index" 
					asp-route-page="@(Model.Page + 1)" 
					asp-route-size="@Model.Size">
						Następna
					</a>
				</li>
			}
			else
			{
				<li class="page-item disabled">
					<a class="page-link">Następna</a>
				</li>
			}
		</ul>
	</nav>
}